<div class="fluid-container module-container">

  <div class="list-controls">

    <div class="row item-list-row">

      <div class="col-xs-6">
        <h2 class="view-name">Manage Goods Received</h2>
      </div>

      <div class="col-xs-6 text-right">
        <a ng-href="/#/delivery-note" class="btn btn-primary"> + <span class="hidden-xs">Create Delivery Note</span></a>
        <button class="btn btn-default" data-toggle="collapse" data-target="#search-collapse" aria-expanded="false"
                aria-controls="search-collapse">
          <span class="fa fa-filter" aria-hidden="true"></span>
          <span class="hidden-sm hidden-xs">Filter</span>
        </button>
      </div>
    </div>

  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">Select an LMP Station to View Delivery Notes*</div>
    </div>
    <div class="panel-body">
      <select class="form-control" ng-model="catererStationId">
        <option ng-repeat="station in stationsList" value="{{ station.id }}">{{ station.code }}</option>
      </select>
    </div>
  </div>

  <div class="panel panel-default collapse no-transition" id="search-collapse">
    <form name="menuSearchForm" ng-submit="searchPostTripData()">
      <div class="panel-body">
        <div class="row">

          <div class="col-xs-12 col-sm-3">
            <div class="form-group">
              <label for="deliveryNoteNumber">Delivery Note Number</label>
              <select class="form-control" id="delivery-note-number" ng-model="search.deliveryNoteNumber" ng-change="deliveryNoteNumberInfo()" ng-disabled="readOnly">
                <option ng-repeat="deliveryNote in deliveryNotesList" value="{{ deliveryNote.deliveryNoteNumber }}">{{ deliveryNote.deliveryNoteNumber }}</option>
              </select>
            </div>
          </div>

          <div class="col-xs-12 col-sm-3">
            <div class="form-group">
              <label for="purchaseOrderNumber">Purchase Order Number</label>
              <select class="form-control" id="purchase-order-number" ng-model="search.purchaseOrderNumber" ng-change="purchaseOrderNumberInfo()" ng-disabled="readOnly">
                <option ng-repeat="deliveryNote in deliveryNotesList" value="{{ deliveryNote.purchaseOrderNumber }}">{{ deliveryNote.purchaseOrderNumber }}</option>
              </select>
            </div>
          </div>

          <date-picker class="col-xs-12 col-sm-4"
            element-class="col-xs-12 col-sm-6"
            start-date-model="dateRange.startDate"
            end-date-model="dateRange.endDate"
            is-search-field="true"
            label-from="Effective From"
            label-to="Effective To">
          </date-picker>

          <div class="col-xs-12 col-sm-2">
            <label>Status</label>
            <select class="form-control" id="delivery-status" ng-model="search.deliveryStatus" ng-change="deliveryStatusInfo()" ng-disabled="readOnly">
              <option ng-repeat="deliveryNote in deliveryNotesList" value="{{ deliveryNote.deliveryStatus }}">{{ deliveryNote.deliveryStatus }}</option>
            </select>
          </div>

        </div>

      </div>
      <div class="panel-footer text-right">
        <button type="button" class="btn btn-default" ng-click="clearSearchFilters()">Clear</button>
        <button type="submit" class="btn btn-primary" ng-click="search()">Search</button>
      </div>
    </form>
  </div>

  <div ng-show="!deliveryNotesList.length && userSelectedStation" class="panel panel-info">
    <div class="panel-heading">
      <div class="panel-title"><i class="fa fa-exclamation-circle"></i> No Delivery Notes Found</div>
    </div>
    <div class="panel-body">
      <p>The station and/or the search criteria you selected has no delivery notes.
        <a ng-href="/#/lmp-delivery-note/create">Create a new delivery note</a> or update your search criteria
    </div>
  </div>

  <table ng-show="catererStationId && deliveryNotesList.length > 0" class="table table-responsive table-bordered table-hover ng-scope">
    <thead>
      <tr>
        <th>Delivery Note Number</th>
        <th>Purchase Order Number</th>
        <th>Delivery Date</th>
        <th>Status</th>
        <th>Updated By</th>
        <th>Updated On</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="deliveryNote in deliveryNotesList">
        <td>{{ deliveryNote.deliveryNoteNumber }}</td>
        <td>{{ deliveryNote.purchaseOrderNumber }}</td>
        <td>{{ deliveryNote.deliveryDate }}</td>
        <td>
          <span ng-show="{{ !deliveryNote.isAccepted }}">Created</span>
          <span ng-show="{{ deliveryNote.isAccepted }}">Saved</span>
        </td>
        <td>{{ deliveryNote.updatedBy }}</td>
        <td>{{ deliveryNote.updatedOn }}</td>
        <td>
          <a class="btn btn-info btn-xs" ng-href="/#/lmp-delivery-note/view/{{deliveryNote.id}}" tabindex="0">
            <i class="fa fa-file"></i>
          </a>
          <a class="btn btn-primary btn-xs" ng-hide="deliveryNote.isAccepted" ng-href="/#/lmp-delivery-note/view/{{deliveryNote.id}}"  tabindex="0" aria-disabled="true">
            <i class="fa fa-pencil"></i>
          </a>
          <button class="btn btn-danger btn-xs" ng-hide="deliveryNote.isAccepted" ng-click="deleteRecordDialog(deliveryNote.id)" tabindex="0" aria-disabled="true">
            <i class="fa fa-trash"></i>
          </button>
        </td>
      </tr>

    </tbody>

  </table>

</div>

<form-success-modal></form-success-modal>
<form-update-modal></form-update-modal>
<leave-view-modal></leave-view-modal>
<delete-record-dialog></delete-record-dialog>
<dynamic-left-nav></dynamic-left-nav>
