<div class="container module-container">
  <form name="manualCashForm" ng-submit="save()">
    <div class="list-controls">
      <div class="row item-list-row">
        <div class="col-xs-8">
          <h2 class="view-name">Manual Epos Entry: <b>Add Virtual Items</b><br>
            <small>Cash Bag {{ cashBag.cashBagNumber }}</small>
          </h2>
        </div>

        <div class="col-xs-4 text-right">
          <a class="btn btn-default" href="/#/manual-epos-dashboard/{{ cashBag.id }}">
            <span class="fa fa-arrow-left"></span> Back
          </a>
          <button class="btn btn-primary" type="submit" ng-click="setShouldExit(true)" ng-hide="isVerified || disableAll">
            <span class="fa fa-check-square-o"></span> Save & Exit
          </button>
        </div>
      </div>
    </div>

    <error-dialog form-object="manualCashForm" error-response="errorResponse" display="displayError">
    </error-dialog>

    <div class="panel panel-default">
      <div class="panel-body">
        <div class="row">
          <div class="form-group col-xs-12">
            <div class="col-xs-9 text-right">
              <h5><b>Operating Currency: </b></h5>
            </div>
            <div class="col-xs-3">
              <ui-select ng-model="currencyObj.virtualItems.currency"
                         theme="bootstrap"
                         ng-disabled="disabled"
                         reset-search-input="false">
                <ui-select-match placeholder="Select Currency">
                  {{$select.selected.code}}
                </ui-select-match>
                <ui-select-choices repeat="currency in currencyList">
                  <div ng-bind-html="currency.code | highlight: $select.search"></div>
                </ui-select-choices>
              </ui-select>
            </div>
          </div>
        </div>

        <div class="panel-divider"></div>

        <div class="row">
          <div class="col-xs-12 col-sm-12">
            <div class="input-group">
              <span class="input-group-addon" id="virtual-filter">Filter</span>
              <input type="text"
                     class="form-control"
                     ng-model="filter.virtualItems"
                     placeholder="Select Virtual Items to filter by ..."
                     aria-describedby="virtual-filter"/>
            </div>
          </div>
        </div>
        <br>

        <div class="table-responsive">
          <table class="table table-hover">

            <tr class="active">
              <th>Virtual Item</th>
              <th>Price</th>
              <th>Qty</th>
              <th>Total Virtual Item Value (CUR)</th>
              <th>Total Virtual Item Value (AUD)</th>
            </tr>

            <!-- Start Virtual Items loop -->
            <tr ng-repeat="virtual in companyVirtualItemsList | filter:{itemName: filter.virtualItems} track by $index">

              <td>
                <ui-select ng-model="virtual"
                           theme="bootstrap"
                           ng-disabled="true"
                           reset-search-input="false">
                  <ui-select-match placeholder="Select Virtual Items to filter by ...">
                    {{$select.selected.itemCode}} - {{$select.selected.itemName}}
                  </ui-select-match>
                  <ui-select-choices repeat="virtual in companyVirtualItemsList">
                    <div ng-bind-html="virtual.itemName | highlight: $select.search"></div>
                  </ui-select-choices>
                </ui-select>
              </td>

              <td>
                <div class="input-group" style="max-width:300px">
                  <span class="input-group-addon" id="currency">{{currencyObj.virtualItems.currency.code}}</span>
                  <input type="number"
                         class="form-control"
                         ng-model="virtual.price"
                         placeholder="12345678.91"
                         aria-describedby="currency"
                         style="min-width:100px"/>
                </div>
              </td>

              <td>
                <input type="number"
                       class="form-control"
                       ng-model="virtual.quantity"
                       placeholder="12345"
                       style="width: 100px"/>
              </td>

              <td>
                <input type="number"
                       class="form-control"
                       ng-model="virtual.currencyValue"
                       disabled="true"/>
              </td>

              <td>
                <input type="number"
                       class="form-control"
                       ng-model="virtual.audValue"
                       disabled="true"/>
              </td>

            </tr>

            <tr ng-show="companyVirtualItemsList.length === 0">
              <td colspan="8" class="text-center">
                <span class="fa fa-exclamation-circle text-danger"></span>
                We're sorry, there are no {{virtual.name}} that match the given criteria
              </td>
            </tr>

          </table>
        </div>

        <div class="row">
          <div class="col-sm-offset-8"></div>
          <div class="col-xs-12 col-sm-2 text-right"><b>Sub Total</b></div>
          <div class="col-xs-12 col-sm-2">
            <input class="form-control" type="number" value="105.50" disabled="true"/>
          </div>
        </div>
      </div>

      <div class="panel-footer">
        <div class="row">
          <div class="col-xs-12 text-right">
            <button class="btn btn-success" ng-click="verifyPanel('Virtual Items')">Verify</button>
          </div>
        </div>
      </div>

    </div>
  </form>
</div>
