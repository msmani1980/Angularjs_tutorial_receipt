<ng-form name="form" class="form edit-form">

	<edit-form-header-directive></edit-form-header-directive>

	<div class="form-nav btn-group" role="group" aria-label="...">

	 	<a ng-click="scrollTo('item-information')" type="button" class="btn btn-default">
	  	Item Information
	  	</a>

	  	<a ng-click="scrollTo('measurements')" type="button" class="btn btn-default">
	  	Measurements
	  	</a>

	 	<a ng-click="scrollTo('price-and-tax')"  type="button" class="btn btn-default">
	  	Price & Tax
	  	</a>

	</div>

	<h3 id="item-information">Item Information</h3>

	<div class="row">

		<div class="col-xs-12 col-sm-6">

			<input-text label="Retail Item Code" name="itemCode" required="true" pattern="regexp.word" placeholder="Item123"></input-text>

			<input-text label="Retail Item Name" name="itemName" required="true"  pattern="regexp.word" placeholder="My Item"></input-text>

			<input-text label="POS Display Name" name="onBoardName" required="true" pattern="regexp.word" placeholder="My Awesome Item"></input-text>

			<input-text label="Item Description" name="desc" required="true" pattern="regexp.word" placeholder="A simple description..."></input-text>

			<input-text label="Keywords" name="keywords" pattern="regexp.word" placeholder="awesome cool new"></input-text>

			<input-text label="Unique Selling Point" name="sellingPoint" pattern="regexp.word" placeholder="Something cool!"></input-text>
	
			<div class="form-group">
				
				<input ng-model="formData.isPrintReceipt" type="checkbox" />
				<label for="item-description">Print Receipt</label>

			</div>

			<div class="row" >

				<div class="col-xs-12 col-sm-6">

					<div class="form-group" ng-class="{ 'has-error' : form[startDate].$dirty && !form[startDate].$valid || displayError && !form[startDate].$valid , 'has-success' : form[startDate].$dirty && form[startDate].$valid }">
						<label for="item-effective-start">Effective From</label>
						<div class="input-group">
							<div class="input-group-addon">  
								<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> 
							</div> 
							<input name="startDate" required ng-model="formData.startDate" type="text" class="form-control" value="20150515" />
						</div>
					</div>

				</div>

				<div class="col-xs-12 col-sm-6">

					<div class="form-group"  ng-class="{ 'has-error' : form[endDate].$dirty && !form[endDate].$valid || displayError && !form[endDate].$valid , 'has-success' : form[endDate].$dirty && form[endDate].$valid }">
						<label for="item-effective-start">Effective To</label>
						<div class="input-group">
							<div class="input-group-addon">  
								<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> 
							</div> 
							<input name="endDate "required ng-model="formData.endDate" type="text" class="form-control" value="20150715" />
						</div>
					</div>

				</div>

			</div>

			<div class="form-group" ng-class="{ 'has-error' : form[categoryId].$dirty && !form[categoryId].$valid || displayError && !form[categoryId].$valid , 'has-success' : form[categoryId].$dirty && form[categoryId].$valid }" >
				<label for="item-sales-category">Sales Category</label>
				<select name="categoryId" required ng-model="formData.categoryId" class="form-control">
						<option ng-repeat="category in salesCategories" value="{{ category.id }}">{{ category.name }}</option>
				</select>
			</div>

			<!--<input-select label="Item Type" name="itemTypeId" required="true" options="{{ itemTypeList }}"></input-select>-->

			<div class="form-group" ng-class="{ 'has-error' : form[itemTypeId].$dirty && !form[itemTypeId].$valid || displayError && !form[itemTypeId].$valid , 'has-success' : form[itemTypeId].$dirty && form[itemTypeId].$valid }">
				<label for="item-type">Item Type</label>
				<select name="itemTypeId" required ng-model="formData.itemTypeId" class="form-control">
					<option ng-repeat="type in itemTypes" value="{{ type.id }}">{{ type.name }}</option>
				</select>
			</div>

			<div class="form-group">
				<label for="item-type">Item Characteristics</label>
				<select multiple ng-model="formData.characteristics" class="form-control">
					<option ng-repeat="character in characteristics" value="{{ character.id }}">{{ character.name }}</option>
				</select>
			</div>

			<div class="form-group">
				<label for="item-type">Item Substitutions</label>
				<select multiple ng-model="formData.substitutions" class="form-control">
					<option ng-repeat="item in items" value="{{ item.id }}">{{ item.itemName }}</option>
				</select>
			</div>

			<div class="form-group">
				<label for="item-type">Item Recommendations</label>
				<select multiple ng-model="formData.recommendations" class="form-control">
					<option ng-repeat="item in items" value="{{ item.id }}">{{ item.itemName }}</option>
				</select>
			</div>

		</div>

		<div class="col-xs-12 col-sm-6">

			<div class="form-group">
				<label for="item-type">Item Tags</label>
				<select multiple ng-model="formData.tags" class="form-control">
					<option ng-repeat="tag in tags" value="{{ tag.id }}">{{ tag.name }}</option>
				</select>
			</div>

			<div class="form-group">
				<label>Allergen</label>
				<select multiple ng-model="formData.allergens" class="form-control">
					<option ng-repeat="allergen in allergens" value="{{ allergen.allergenId }}">{{ allergen.name }}</option>
				</select>
			</div>

			<div class="form-group upload-container" ng-controller="UploadCtrl">
		
			    <label for="item-type">Item Image (max size: 10kb and 128 x 128 pixels)</label>

			    <div ngf-select="" ngf-drop="" class="drop-box" 
			    	ng-model="files" 
			    	ng-model-rejected="rejFiles"
			    	ngf-change="generateThumb(file, files)"
			       	ngf-drag-over-class="dragover"  
			        ngf-multiple="true" 
			        ngf-allow-dir="true"
			        ngf-accept="'.jpg,.png'"
			        ngf-min-size='10' 
    				ngf-max-size='10000' 
			    >

			        Drop Images, or Click.
            
			    </div>

			    <p class="alert alert-danger" ng-model="files" ng-show="rejFiles.length">File doesn't meet requirements.</p>
 
			    <div class="thumbnails" ng-show="files.length" ng-model="files">

			    	<div class="img-thumbnail" ng-repeat="file in files">

					    <!--TODO - Stop file thumbnails from overwriting eachother -->
					    <img ngf-thumbnail="file" class="thumbs" />

				    	<p>{{file.name}}</p>

	    				<progressbar class="progress-striped" ng-model="files" ng-show="!fail && !success" ng-show="files.length" animate="true" value="progress"><b>{{progress}}%</b>
	    				</progressbar>

	    				<progressbar class="progress-striped" ng-model="files" ng-show="success" animate="true" value="100" type="success"><b>Success!</b>
	    				</progressbar>

	        			<progressbar class="progress-striped" ng-model="files" ng-show="fail" animate="true" value="100" type="danger"><b>Fail</b>
	    				</progressbar>
        			
				    </div>

			    </div>

			    <div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div>

			    <button class="btn button btn-success" ng-model="files" ng-hide="success" ng-disabled="!files.length" ng-click="upload()">Upload</button>
			    <button class="btn button btn-default" ng-model="files" ng-show="files.length" ng-click="clearFiles()">Clear</button>


			  
			</div>

			<input-text label="Global Trade Item Number (GTIN)" name="GTIN" pattern="regexp.word" placeholder="1234"></input-text>

			<input-text label="Mfg. Part Number" name="mfgPartNumber" pattern="regexp.word" placeholder="1234"></input-text>

			<input-text label="Stock Keeping Unit (SKU)" name="skuNumber" pattern="regexp.word" placeholder="1234"></input-text>

			<tabset justified="true">

				<tab heading="QR Create">

					<div class="tab-pane">

						<div class="qr-code">
							<div class="thumb">
								<qr text="formData.qrCodeValue" image="true" size="128"></qr>
							</div>
							<a class="btn btn-success">Save</a>
						</div>

						<input-text label="QR Code" name="qrCodeValue" pattern="regexp.word" placeholder="my qr code"></input-text>

					</div>

				</tab>

				<tab heading="QR Upload">
				
				<div class="form-group qr-upload-container" ng-controller="QruploadCtrl">

				    <div ngf-select="" ngf-drop="" class="drop-box" 
				    	ng-model="qrcodes"
				    	ng-model-rejected="rejFiles"
				       	ngf-drag-over-class="dragover"  
				        ngf-multiple="false" 
				        ngf-allow-dir="true"
				        ngf-accept="'.png,.jpg'"
				        ngf-min-size='10' 
	    				ngf-max-size='10000' 
				    >

				        Drop QR Code, or Click.
	            
				    </div>
	 
				    <div class="thumbnails" ng-show="qrcodes != null" ng-model="qrcodes">

				    	<div class="img-thumbnail" ng-repeat="qrcode in qrcodes">

						    <!--TODO - Stop file thumbnails from overwriting eachother -->
						    <img ngf-thumbnail="qrcode" class="thumbs" />

					    	<p>{{qrcode.name}}</p>

					    </div>

				    </div>

				    <div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div>

				    <button class="button" ng-model="qrcodes" ng-disabled="!qrcodes" ng-click="upload()">Upload</button>

	        		<p class="alert alert-success" ng-show="file.result">{{file.result}} Upload Successful</p>

	        		<p class="alert alert-warning" ng-show="file.result">{{file.result}} Upload Failed</p>
				  
					</div>

				</tab>

			</tabset>

			<input-text label="QR Image URL" name="qrCodeImgUrl" pattern="regexp.url" placeholder="1234"></input-text>
			
		</div>

	</div>

	<h3 id="measurements">Measurements</h3>

	<div class="row">

		<div class="col-xs-12 col-sm-6">

			<div class="form-inline">

				<label>Item Weight</label>
				<input ng-model="formData.weight" type="text" class="form-control" placeholder="10.00">

				<select ng-model="formData.weightType" class="form-control">
					<option ng-repeat="weight in weightUnits" value="{{ weight.id }}">{{ weight.unitCode }}</option>
				</select>

			</div>

			<div class="form-inline">

				<label>Item Volume</label>
				<input ng-model="formData.volume" type="text" class="form-control" placeholder="10.00">

				<select ng-model="formData.volumeType" class="form-control">
					<option ng-repeat="volume in volumeUnits" value="{{ volume.id }}">{{ volume.unitCode }}</option>
				</select>
				
			</div>

		</div>

		<div class="col-xs-12 col-sm-6">

			<div class="form-inline">

				<label>Measurements</label>
				<input ng-model="formData.length" type="text" class="form-control" placeholder="Length"> x
				<input ng-model="formData.width" type="text" class="form-control" placeholder="Width"> x
				<input ng-model="formData.height" type="text" class="form-control" placeholder="Height"> 

				<select ng-model="formData.dimensionType" class="form-control">
					<option ng-repeat="dimension in dimensionUnits" value="{{ dimension.id }}">{{ dimension.unitCode }}</option>
				</select>

			</div>

		</div>

	</div>

	<h3 id="price-and-tax">Price & Tax</h3>

	<div class="row">

		<div class="col-xs-12 col-sm-6">

			<div class="form-inline">

				<label>Price Type</label>

				<select ng-model="formData.prices.typeId" class="form-control">
					<option ng-repeat="type in priceTypes" value="{{ type.id }}">{{ type.name }}</option>
				</select>

			</div>

			<div class="form-inline">

				<label>Tax Is</label>

				<select ng-model="formData.prices.taxIs" class="form-control">
					<option value="Included">Included</option>
					<option value="Excluded">Excluded</option>
					<option value="Exempt">Exempt</option>
				</select>

			</div>

			<div class="row">

				<div class="col-xs-12 col-sm-6">

					<div class="form-group">
						<label for="item-effective-start">Effective From</label>
						<div class="input-group">
							<div class="input-group-addon">  
								<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> 
							</div> 
							<input ng-model="formData.prices.startDate" type="text" class="form-control" value="20150515" />
						</div>
					</div>

				</div>

				<div class="col-xs-12 col-sm-6">

					<div class="form-group">
						<label for="item-effective-start">Effective From</label>
						<div class="input-group">
							<div class="input-group-addon">  
								<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> 
							</div> 
							<input ng-model="formData.prices.startDate" type="text" class="form-control" value="20150515" />
						</div>
					</div>

				</div>

			</div>

		</div>

		<div class="col-xs-12 col-sm-6">

			<div class="form-inline">

				<label>Applied Tax Type</label>

				<select ng-model="formData.taxes.companyTaxId" class="form-control">
					<option ng-repeat="type in taxTypes" value="{{ type.id }}">{{ type.taxTypeCode }} - {{ type.description}} </option>
				</select>

				<select ng-model="formData.taxes.itemTaxType" class="form-control">
					<option value="1">Gross</option>
					<option value="2">Net</option>
				</select>

			</div>

		</div>

	</div>

</ng-form>