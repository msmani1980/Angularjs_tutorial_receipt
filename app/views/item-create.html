<div class="wrapper">

	<div class="top-header">

		<div class="wrapper">

			<div class="edit-controls">

				<div class="row">

					<div class="col-xs-6">
						
						<h2 class="view-name"> {{ viewName }} </h2>

					</div>

					<div class="col-xs-6 text-right">

						<a href="#/item-list" class="btn btn-default">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span> 
							<span class="hidden-xs">Cancel</span> 
						</a>
						
						<button class="btn btn-blue" ng-click="submitForm(formData)"> 
							<span class="glyphicon glyphicon-check" aria-hidden="true"></span> 
							<span class="hidden-xs">Create</span> 
						</button>

					</div>

				</div>

			</div>

			<div class="form-nav btn-group-justified item-top" role="group" aria-label="..." ng-init="activeBtn = 'item-information'">

			 	<a ng-click="activeBtn = 'item-information'" ng-class="{'active':activeBtn === 'item-information'}" type="button" class="btn btn-default">
			  	Item Information
			  	</a>

			  	<a ng-click="activeBtn = 'measurements'" ng-class="{'active':activeBtn === 'measurements'}" type="button" class="btn btn-default">
			  	Measurements
			  	</a>

			 	<a ng-click="activeBtn = 'price-and-tax'" ng-class="{'active':activeBtn === 'price-and-tax'}" type="button" class="btn btn-default">
			  	Price & Tax
			  	</a>

			</div>

			<p>All required fields are marked with a *.</p>

		</div>

	</div>

	<ng-form name="form" class="form edit-form create-item-form">

		<div ng-show="displayError" class="alert alert-danger alert-dismissible fade in" role="alert">

			<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
			
			<h4 id="oh-snap!-you-got-an-error!">
				We weren't able to create your item!
				<a class="anchorjs-link" href="#oh-snap!-you-got-an-error!"><span class="anchorjs-icon"></span></a>
			</h4>

			<ul>

				<li ng-repeat="error in form.$error.required"> 

					<strong>{{ error.$name }}</strong> is required

				</li>
				<li ng-repeat="error in form.$error.pattern"> 

					<strong>{{ error.$name }}</strong> is invalid
					
				</li>

			</ul>

				<li ng-show="formErrors" ng-repeat="error in formErrors" ng-switch on="error.code"> <strong>{{ error.field }}</strong> - 

					<span ng-switch-when="004">An item already exists with this {{ error.field }}</span>

					<span ng-switch-when="000">Field can't be empty</span>

					<span ng-switch-default> {{ error.value }} </span>	
					
				</li>

			</ul>

		</div>

		<h3 id="item-information">Item Information</h3>

		<div class="row">

			<div class="col-xs-12 col-sm-6">

				<input-text label="Retail Item Code" name="itemCode" required="true" pattern="regexp.word" placeholder="Item123"></input-text>

				<input-text label="Retail Item Name" name="itemName" required="true"  pattern="regexp.word" placeholder="My Item"></input-text>

				<input-text label="POS Display Name" name="onBoardName" required="true" pattern="regexp.word" placeholder="My Awesome Item"></input-text>

				<input-text label="Item Description" name="desc" required="true" pattern="regexp.word" placeholder="A simple description..."></input-text>

				<input-text label="Keywords" name="keywords" pattern="regexp.word" placeholder="awesome cool new"></input-text>

				<input-text label="Unique Selling Point" name="sellingPoint" pattern="regexp.word" placeholder="Something cool!"></input-text>

				<div class="form-group">

					<input ng-model="formData.isPrintReceipt" type="checkbox" />
					<label>Print Receipt</label>

				</div>

				<div class="row" >

					<div class="col-xs-12 col-sm-6">

						<div class="form-group" ng-class="{ 'has-error' : form[startDate].$dirty && !form[startDate].$valid || displayError && !form[startDate].$valid , 'has-success' : form[startDate].$dirty && form[startDate].$valid }">
							<label>Effective From</label>
							<div class="input-group">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
								</div>
								<input name="startDate" required ng-model="formData.startDate" type="text" class="form-control" value="20150515" />
							</div>
						</div>

					</div>

					<div class="col-xs-12 col-sm-6">

						<div class="form-group"  ng-class="{ 'has-error' : form[endDate].$dirty && !form[endDate].$valid || displayError && !form[endDate].$valid , 'has-success' : form[endDate].$dirty && form[endDate].$valid }">
							<label>Effective To</label>
							<div class="input-group">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
								</div>
								<input name="endDate "required ng-model="formData.endDate" type="text" class="form-control" value="20150715" />
							</div>
						</div>

					</div>

				</div>

				<div class="form-group" ng-class="{ 'has-error' : form[categoryId].$dirty && !form[categoryId].$valid || displayError && !form[categoryId].$valid , 'has-success' : form[categoryId].$dirty && form[categoryId].$valid }" >
					<label>Sales Category</label>
					<select name="categoryId" required ng-model="formData.categoryId" class="form-control">
							<option ng-repeat="category in salesCategories" value="{{ category.id }}">{{ category.name }}</option>
					</select>
				</div>

				<!--<input-select label="Item Type" name="itemTypeId" required="true" options="{{ itemTypeList }}"></input-select>-->

				<div class="form-group" ng-class="{ 'has-error' : form[itemTypeId].$dirty && !form[itemTypeId].$valid || displayError && !form[itemTypeId].$valid , 'has-success' : form[itemTypeId].$dirty && form[itemTypeId].$valid }">
					<label>Item Type</label>
					<select name="itemTypeId" required ng-model="formData.itemTypeId" class="form-control">
						<option ng-repeat="type in itemTypes" value="{{ type.id }}">{{ type.name }}</option>
					</select>
				</div>

				<div class="form-group">
					<label>Item Characteristics</label>
					<select multiple ng-model="formData.characteristics" class="form-control">
						<option ng-repeat="character in characteristics" value="{{ character.id }}">{{ character.name }}</option>
					</select>
				</div>

				<div class="form-group">
					<label>Item Substitutions</label>
					<select multiple ng-model="formData.substitutions" class="form-control">
						<option ng-repeat="item in items" value="{{ item.id }}">{{ item.itemName }}</option>
					</select>
				</div>

				<div class="form-group">
					<label>Item Recommendations</label>
					<select multiple ng-model="formData.recommendations" class="form-control">
						<option ng-repeat="item in items" value="{{ item.id }}">{{ item.itemName }}</option>
					</select>
				</div>

			</div>

			<div class="col-xs-12 col-sm-6">

				<div class="form-group">
					<label>Item Tags</label>
					<select multiple ng-model="formData.tags" class="form-control">
						<option ng-repeat="tag in tags" value="{{ tag.id }}">{{ tag.name }}</option>
					</select>
				</div>

				<div class="form-group">
					<label>Allergen</label>
					<select multiple ng-model="formData.allergens" class="form-control">
						<option ng-repeat="allergen in allergens" value="{{ allergen.allergenId }}">{{ allergen.name }}</option>
					</select>
				</div>

				<image-upload></image-upload>

				<input-text label="Global Trade Item Number (GTIN)" name="GTIN" pattern="regexp.word" placeholder="1234"></input-text>

				<input-text label="Mfg. Part Number" name="mfgPartNumber" pattern="regexp.word" placeholder="1234"></input-text>

				<input-text label="Stock Keeping Unit (SKU)" name="skuNumber" pattern="regexp.word" placeholder="1234"></input-text>

				<tabset justified="true">

					<tab heading="QR Create">

						<qr-create></qr-create>

					</tab>

					<tab heading="QR Upload">

						<qr-upload></qr-upload>

					</tab>

				</tabset>

				<input-text label="QR Image URL" name="qrCodeImgUrl" pattern="regexp.url" placeholder="1234" ng-model="files"></input-text>

			</div>

		</div>

		<h3 id="measurements">Measurements</h3>

		<div class="row">

			<div class="col-xs-12 col-sm-6">

				<div class="form-inline">

					<label>Item Weight</label>
					<input ng-model="formData.weight" type="text" class="form-control" placeholder="10.00">

					<select ng-model="formData.weightType" class="form-control">
						<option ng-repeat="weight in weightUnits" value="{{ weight.id }}">{{ weight.unitCode }}</option>
					</select>

				</div>

				<div class="form-inline">

					<label>Item Volume</label>
					<input ng-model="formData.volume" type="text" class="form-control" placeholder="10.00">

					<select ng-model="formData.volumeType" class="form-control">
						<option ng-repeat="volume in volumeUnits" value="{{ volume.id }}">{{ volume.unitCode }}</option>
					</select>

				</div>

			</div>

			<div class="col-xs-12 col-sm-6">

				<div class="form-inline">

					<label>Measurements</label>
					<input ng-model="formData.length" type="text" class="form-control small" placeholder="Length"> 
					<span class="glyphicon glyphicon-remove"></span>
					<input ng-model="formData.width" type="text" class="form-control small" placeholder="Width"> 
					<span class="glyphicon glyphicon-remove"></span>
					<input ng-model="formData.height" type="text" class="form-control small" placeholder="Height">

					<select ng-model="formData.dimensionType" class="form-control">
						<option ng-repeat="dimension in dimensionUnits" value="{{ dimension.id }}">{{ dimension.unitCode }}</option>
					</select>

				</div>

			</div>

		</div>

		<h3 id="price-and-tax">Price & Tax</h3>

		<button type="button" class="btn btn-primary" ng-click="add()">
	       <i class="fa fa-plus"></i> Add Additional Price Type
	    </button>

	    <button type="button" class="btn btn-primary" ng-click="addPrice()">
	       <i class="fa fa-plus"></i> Add Price
	    </button>

		<div id="price-type-container">
			<input-price-type></input-price-type>
		</div>

		<!-- Tax Type -->
		<div class="row">

			<div class="col-xs-12 col-sm-6">

				<div class="form-group">
				<label>Tax Type</label>

				<select ng-model="formData.taxes.companyTaxId" class="form-control">
					<option ng-repeat="type in taxTypes" value="{{ type.id }}">{{ type.taxTypeCode }} - {{ type.description}} </option>
				</select>
				</div>

			</div>

			<div class="col-xs-12 col-sm-6">

				<div class="form-group">
				<label>Applied Tax Type</label>

				<select ng-model="formData.taxes.itemTaxType" class="form-control">
					<option value="1">Gross</option>
					<option value="2">Net</option>
				</select>
				</div>

			</div>

		</div>

	</ng-form>

</div>

<div class="modal fade" id="create-success">

	<div class="modal-dialog">

		<div class="modal-content">

			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Success!</h4>
			</div>

			<div class="modal-body">
				<p>Success!</p>
			</div>

			<div class="modal-footer">
				<a href="#/item-list" type="button" class="btn btn-default" data-dismiss="modal">Return to List</a>
				<a href="#/item-create" class="btn btn-primary">Add Another</a>
			</div>

		</div>

	</div>

</div>